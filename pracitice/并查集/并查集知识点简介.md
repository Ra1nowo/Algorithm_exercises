# 并查集

定义:并查集是一种树型的数据结构，用于处理一些不相交集合的合并及查询问题(即所谓的并和查)
我们可以用并查集来判断一个森林中有几棵树、某个节点是否属于某棵树等

> 它支持一下3种操作:
> - _初始化(initial)_ 将每个元素都初始化为只有一个元素的集合
> - _并(merge)_ 将两个集合合并到一起
> - _查(find)_  查找某个元素的根节点元素编号


初始化并查集:
```
int p[N],cnt;
for (int i = 1; i <= n; ++i) p[i] = i;
```

并(merge)
```
int rx = find(x), ry = find(y);
if (rx != ry) p[rx] = ry;cnt--;
```

查(find)
```
// 压缩路径
if (x != p[x]) p[x] = find(p[x]);
return x;
```

# 习题更新：

模板题：

> w 星球的一个种植园，被分成m×n个小格子（东西方向m行，南北方向n列）。每个格子里种了一株合根植物。
> 这种植物有个特点，它的根可能会沿着南北或东西方向伸展，从而与另一个格子的植物合成为一体。
> 如果我们告诉你哪些小格子间出现了连根现象，你能说出这个园中一共有多少株合根植物吗？
>
> 输入描述：
> ```
> 第一行，两个整数m,n用空格分开，表示格子的行数、列数
> 接下来一行，一个整数k,表示下面还有k行数据。
> 接下来k行，每行两个整数a,b表示编号为a的小格子和编号为b的小格子合根了。
> 格子的编号一行一行，从上到下，从左到右编号。
> ```
> 输出描述：
> ```
> 输出植物数量
> ```
> 示例：
> 
> 输入：
> ```
> 5 4
> 16
> 2 3
> 1 5
> 5 9
> 4 8
> 7 8
> 9 10
> 10 11
> 11 12
> 10 14
> 12 16
> 14 18
> 17 18
> 15 19
> 19 20
> 9 13
> 13 17
> ```
> 输出：
> ```
> 5
> ```
>
习题1：学校班级个数
>
> 现有一个学校,学校中有若干个班级,每个班级中有若干个学生,每个学生只会存在于一个班级中.如果学生A和学生B处于一个班级,学生B和学生C处于一个班级,那么我们称学生A和学生C也处于一个班级.现已知学校中共个学生（编号为从1到n），并给出m​组学生关系（指定两个学生处于一个班级），问总共有多少个班级。
>
> 输入描述:
> ```
> 第一行输入两个整数n,m分别表示学生个数,学生关系个数,接下来m+1行,每行两个整数a,b,表示这两个学生之间存在关系
> ```
> 输出描述：
> ```
> 返回班级个数
> ```
> 样例1:
>
> 输入：
> ```
> 5 3
> 4 2
> 1 3
> 2 5
> ```
> 输出:
> ```
> 2
> ```
>
习题2：学校的班级人数:
>
> 现有一个学校,学校中有若干个班级,每个班级中有若干个学生,每个学生只会存在于一个班级中.如果学生A和学生B处于一个班级,学生B和学生C处于一个班级,那么我们称学生A和学生C也处于一个班级.现已知学校中共个学生（编号为从1到n），并给出m​组学生关系（指定两个学生处于一个班级），问总共有多少个班级,并且按降序给出每个班级人数。
>
> 输入描述:
> ```
> 第一行输入两个整数n,m分别表示学生个数,学生关系个数,接下来m+1行,每行两个整数a,b,表示这两个学生之间存在关系
> ```
> 输出描述：
> ```
> 返回班级个数,并按降序给出班级人数
> ```
> 样例1:
>
> 输入：
> ```
> 5 3
> 4 2
> 1 3
> 2 5
> ```
> 输出:
> ```
> 2
> 3 2
> ```
>
习题3：查询是否在同一个班级:
>
> 现有一个学校,学校中有若干个班级,每个班级中有若干个学生,每个学生只会存在于一个班级中.如果学生A和学生B处于一个班级,学生B和学生C处于一个班级,那么我们称学生A和学生C也处于一个班级.现已知学校中共个学生（编号为从1到n），并给出m​组学生关系（指定两个学生处于一个班级）,然后给出k个查询,每个查询询问两个学生是否在同一个班级。
>
> 输入描述:
> ```
> 第一行输入两个整数n,m分别表示学生个数,学生关系个数,接下来m行,每行两个整数a,b,表示这两个学生之间存在关系
> 然后是一个整数k,表示接下来有k次查询接下来k行,每行两个这个数a,b表示询问标号为a和b的两个同学是否在同一个班级
> ```
> 输出描述：
> ```
> 每个查询输出一行,在同一个班级输出Yes,反之输出No
> ```
> 样例1:
>
> 输入：
> ```
> 5 3
> 4 2
> 1 3
> 2 5
> 2
> 4 5
> 1 2
> ```
> 输出:
> ```
> Yes
> No
> ```
>
习题4：迷宫连通性
>
> 一个迷宫中现在有n个房间,房间之间可能连通,如果房间A和房间B连通,房间B和房间C连通,那么我们说房间A和房间C是连通的,问迷宫内的所有房间是否连通
>
> 输入描述:
> ```
> 第一行输入两个整数n,m表示有n个房间,连通关系个数为m
> 接下来m行每行包含两个整数,a,b,表示房间a和房间b是连通的
> ```
> 输出描述：
> ```
> 如果所有房间都是连通的,输出Yes,反之输出No
> ```
> 样例1：
>
> 输入：
> ```
> 5 4
> 4 2
> 1 3
> 2 5
> 1 5
> ```
> 输出：
> ```
> Yes
> ```
>
> 习题5：最大价值的结晶宝石
>
> 现在有n个虫洞入口,编号为(1-n)虫洞之间能在飞船加持下双向穿梭,即如果虫洞x能穿越虫洞y,那么虫洞y也能穿越虫洞x
> 每个虫洞附近有价值为w的结晶宝石。由于虫洞穿越的质量限制,飞船上至多只能带一个宝石，如果要换宝石,则需要先将飞船内的宝石卸下,才能装下一个。
> 请输出从1号虫洞到n号虫洞出发分别能获得的宝石的最大价值。
>
> 输入描述：
> ```
> 第一行为虫洞数量n
> 第二行为n个互不相同的数a[i],其中编号为i的虫洞能穿越到编号为a[i]的虫洞
> 第三行为n个整数，表示每个虫洞附近的结晶宝石的价值w
> ```
> 输出描述：
> ```
> 一行n个整数,用空格分开,最后一个字符没有空格.
> 表示从第i个虫洞穿越,能获得的结晶宝石最大价值是多少。
> ```
> 样例1：
>
> 输入：
> ```
> 3
> 1 2 3
> 1 2 3
> ```
> 输出：
> ```
> 1 2 3
> ```
>
> 习题6：新道路查询后的最短距离
>
> 给你一个整数 n 和一个二维整数数组 queries。
> 有 n 个城市，编号从 0 到 n - 1。初始时，每个城市 i 都有一条单向道路通往城市 i + 1（ 0 <= i < n - 1）。
> queries[i] = [ui, vi] 表示新建一条从城市 ui 到城市 vi 的单向道路。每次查询后，你需要找到从城市 0 到城市 n - 1 的最短路径的长度。
> 所有查询中不会存在两个查询都满足 queries[i][0] < queries[j][0] < queries[i][1] < queries[j][1]。
> 返回一个数组 answer，对于范围 [0, queries.length - 1] 中的每个 i，answer[i] 是处理完前 i + 1 个查询后，从城市 0 到城市 n - 1 的最短路径的长度。
> 注(该题为leetcode核心代码模式的题目，无需自己写输入输出)
>
>示例：
>
>输入：
>```
> n = 5, queries = [[2, 4], [0, 2], [0, 4]]
>```
>输出：
>```
>[3, 2, 1]
>```
>
>
> 习题7：蓝桥幼儿园
>
> 蓝桥幼儿园的学生是如此的天真无邪，以至于对他们来说，朋友的朋友就是自己的朋友。
> 小明是蓝桥幼儿园的老师，这天他决定为学生们举办一个交友活动，活动规则如下：
> 小明会用红绳连接两名学生，被连中的两个学生将成为朋友。
> 小明想让所有学生都互相成为朋友，但是蓝桥幼儿园的学生实在太多了，他无法用肉眼判断某两个学生是否为朋友
> 于是他起来了作为编程大师的你，请你帮忙写程序判断某两个学生是否为朋友（默认自己和自己也是朋友）。
>
> 输入描述：
> ```
> 第一行包括两个正整数n,m,n表示幼儿园学生数量,学生标号为1~n
> 之后的m行每行包括3个整数,op,x,y
> 如果op = 1,则表示小明用红绳链接了学生x和y
> 如果op = 2 请问学生x和学生y是否为好朋友
> ```
> 输出描述：
> ```
> 对于每个op = 2的输入,如果x和y是朋友,则输出一行 YES,否则输出一行 NO。
> ```
> 样例1：
>
> 输入
> ```
> 5 5 
> 2 1 2
> 1 1 3
> 2 1 3
> 1 2 3 
> 2 1 2
> ```
> 输出：
> ```
> NO
> YES
> YES
> ```
>
习题8：蓝桥部队
>
> 小明是蓝桥部队的长官，他的班上有N名军人和1名军师。
> 这天，N名军人在操场上站成一排，起初编号为i的军人站在第 i列。
> 作为长官，小明可以对军人和军师下达M条命令，命令有两种类型，格式如下：
> 1 x y 让军人x所在的列整体移动刀y后面
> 2 x y 查询军人x和y是否在同一列,如果是,需要输出这两个人之间有多少个人,反之,返回-1
>
> 输入描述：
> ```
> 输入第一行包含两个整数n,m说明有n个军人和m条命令
> 接下里m行包含3个整数op x,y
> ```
> 输出描述：
> ```
> 对于每一个询问,输出一行表示结果
> ```
> 示例：
>
> 输入：
> ```
> 3 5
> 2 1 2
> 1 2 1 
> 2 1 2
> 1 1 3
> 2 2 3 
> ```
> 输出：
> ```
> -1
> 0
> 1
> ```
>
习题9：怪异的要求
>
> 上完图论课后,小桥给了小蓝一个挑战
> 存在n个点,m条边,每条边连接两个点
> 小桥请小蓝回答:最少加上多少条边,能使得连通块的个数小于等于k
> 联通块：如果某两个点能通过边直接或者间接相连，我们称他们处于一个连通块。
> 输入描述：
> ```
> 第一行输入三个整数n,m,k
> 接下来m行,每行包括两个整数u,v
> ```
> 输出描述：
> ```
> 输出一个整数,代表最少加上多少条边,能使得连通块个数满足要求
> ```
> 示例：
>
> 输入：
> ```
> 5 5 1
> 1 2
> 2 3 
> 1 3
> 4 5
> 5 4
> ```
> 输出：
> ```
> 1
> ```

